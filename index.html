<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>í•œêµ­ ì„œí•‘ ìŠ¤íŒŸ ê°€ì´ë“œ â€“ ëª¨ë°”ì¼ ê°€ë…ì„± ê°•í™”íŒ</title>
  <style>
    * { box-sizing: border-box; }
    :root{
      --bg: #0891b2;
      --glass: rgba(255,255,255,.16);
      --glass-2: rgba(248,249,250,.18);
      --ink: #2c3e50;
      --muted: #6b8a99;
      --good-1:#27ae60;--good-2:#2ecc71; /* ë°”ëŒ(ì´ˆë¡) */
      --swell-1:#1f9bd1;--swell-2:#0b3b47; /* íŒŒë„(íŒŒë‘) */
      --sand-1:#f39c12;--sand-2:#e67e22;
      --reef-1:#8e44ad;--reef-2:#9b59b6;
    }
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--bg);
      background-image:url('https://wrdesign5.github.io/images/Featured-image-Uluwatu-Bali-Indonesia-1244x700.jpg');
      background-position:center; background-size:cover; background-attachment:fixed;
      min-height:100vh; padding:20px;
    }
    .container{
      max-width:1200px; margin:0 auto; background:var(--glass);
      border-radius:16px; padding:24px; box-shadow:0 20px 40px rgba(0,0,0,.15);
      backdrop-filter:saturate(1.2) blur(10px);
    }
    header{ text-align:center; margin-bottom:16px; }
    header h1{ font-size:clamp(1.6rem, 2.4vw + 1rem, 2.6rem); color:var(--ink); margin:.2rem 0; }
    header p{ color:var(--muted); }

    .actions{ display:flex; gap:8px; flex-wrap:wrap; justify-content:space-between; align-items:center; margin:16px 0 12px; }
    .left-actions{ display:flex; gap:8px; flex-wrap:wrap; }
    input[type="search"], select{
      appearance:none; border:1px solid rgba(0,0,0,.08); background:white; border-radius:10px;
      padding:.6rem .8rem; font-size:.95rem; min-width:200px;
    }
    .toggle{ cursor:pointer; border:1px solid rgba(255,255,255,.5); background:var(--glass-2); color:#03414e; padding:.55rem .8rem; border-radius:10px; }

    .table-container{ overflow:auto; border-radius:12px; box-shadow:0 5px 15px rgba(0,0,0,.08); background:var(--glass); --sticky: sticky; }
    table{ width:100%; border-collapse:collapse; backdrop-filter: blur(4px); }
    caption{ text-align:left; padding:10px 12px; color:#0b3b47; font-weight:600; }
    thead{ position:var(--sticky); top:0; z-index:2; background:linear-gradient(135deg, rgba(52,152,219,.9), rgba(41,128,185,.9)); color:white; }
    th,td{ padding:12px 10px; text-align:center; }
    th{ font-weight:700; font-size:.9rem; }
    tbody tr{ transition: transform .16s ease, background-color .2s ease; }
    tbody tr:hover{ background-color: rgba(248,249,250,.5); transform: translateY(-1px); }
    tbody tr:nth-child(even){ background-color: rgba(248,249,250,.28); }

    .beach-info{ display:flex; align-items:center; gap:10px; }
    .beach-image{ width:44px; height:44px; border-radius:10px; object-fit:cover; box-shadow:0 2px 8px rgba(0,0,0,.15); }
    .beach-name{ font-weight:700; color:var(--ink); }
    .region{ color:#637a87; font-size:.92rem; }

    .wind-arrows{ display:flex; gap:6px; justify-content:center; flex-wrap:wrap; }
    .wind-arrow{ width:36px; height:24px; border-radius:12px; display:flex; align-items:center; justify-content:center; font-size:16px; color:white; font-weight:700; background:linear-gradient(135deg, var(--good-1), var(--good-2)); box-shadow:0 2px 4px rgba(39,174,96,.28); }

    /* ìŠ¤ì›°(íŒŒë„) í‘œì‹œ */
    .swell-arrows{ display:flex; gap:6px; justify-content:center; flex-wrap:wrap; }
    .swell-group{ display:flex; gap:4px; margin:2px 4px; }
    .swell-arrow{ width:36px; height:24px; border-radius:12px; display:flex; align-items:center; justify-content:center; font-size:16px; color:white; font-weight:700; background:linear-gradient(135deg,var(--swell-1),var(--swell-2)); box-shadow:0 2px 4px rgba(31,155,209,.28); }

    /* ë°”ëŒ/íŒŒë„ 3ì¤„ ìŠ¤íƒ í‘œì‹œ */
    .stack{ display:flex; flex-direction:column; gap:4px; align-items:center; }
    .stack-line{ display:flex; gap:6px; align-items:center; justify-content:center; }

    .bottom-type{ padding:5px 12px; border-radius:14px; font-size:.82rem; font-weight:700; color:white; display:inline-block; }
    .bottom-type.sand{ background:linear-gradient(135deg, var(--sand-1), var(--sand-2)); }
    .bottom-type.reef{ background:linear-gradient(135deg, var(--reef-1), var(--reef-2)); }

    .difficulty{ padding:4px 10px; border-radius:12px; font-size:.82rem; font-weight:700; color:white; }
    .beginner{ background:#2ecc71; }
    .intermediate{ background:#f39c12; }
    .advanced{ background:#e74c3c; }

    .legend, .tips{ background:var(--glass-2); padding:16px; border-radius:12px; margin-top:14px; backdrop-filter: blur(5px); }
    .legend h3, .tips h3{ margin:0 0 10px; color:var(--ink); }
    .legend-items{ display:grid; grid-template-columns:repeat(auto-fit, minmax(260px,1fr)); gap:10px; }
    .legend-item{ display:flex; align-items:center; gap:10px; flex-wrap:wrap; }

    .tips ul{ list-style:none; padding-left:0; margin:0; }
    .tips li{ margin:8px 0; padding-left:22px; position:relative; }
    .tips li::before{ content:"ğŸŒŠ"; position:absolute; left:0; }

    /* ì¹´ë“œí˜• ë ˆì´ì•„ì›ƒ (ëª¨ë°”ì¼ ì „í™˜) */
    .cards{ display:none; grid-template-columns:repeat(auto-fill, minmax(260px, 1fr)); gap:12px; }
    .card{ background:var(--glass); border:1px solid rgba(255,255,255,.35); border-radius:14px; padding:12px; box-shadow:0 4px 12px rgba(0,0,0,.08); }
    .card header{ display:flex; align-items:center; gap:10px; justify-content:flex-start; margin-bottom:8px; }
    .meta{ display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
    .meta-grid{ display:grid; grid-template-columns:1fr 1fr; gap:8px; margin:8px 0; }
    .subhead{ font-size:.78rem; font-weight:700; padding:3px 8px; border-radius:999px; display:inline-block; color:white; }
    .subhead.wind{ background:linear-gradient(135deg, var(--good-1), var(--good-2)); }
    .subhead.swell{ background:linear-gradient(135deg, var(--swell-1), var(--swell-2)); }

    /* ëª¨ë°”ì¼ íŒíŠ¸ ë°”: ìƒ‰ìƒ ì˜ë¯¸ë¥¼ í…ìŠ¤íŠ¸ë¡œ ëª…í™•íˆ */
    .mobile-hint{
      display:none; position:sticky; top:8px; z-index:3;
      background:rgba(255,255,255,.6); backdrop-filter: blur(8px);
      padding:8px 10px; border-radius:12px; margin:8px 0;
      box-shadow:0 4px 10px rgba(0,0,0,.08);
    }
    .pill{ display:inline-block; font-size:.8rem; font-weight:700; padding:4px 10px; border-radius:999px; color:#fff; margin-right:6px; }
    .pill.wind{ background:linear-gradient(135deg, var(--good-1), var(--good-2)); }
    .pill.swell{ background:linear-gradient(135deg, var(--swell-1), var(--swell-2)); }

    :focus-visible{ outline: 3px solid #1f9bd1; outline-offset: 2px; border-radius:8px; }
    @media (max-width: 820px){
      .container{ padding:14px; }
      th,td{ padding:9px 6px; font-size:.85rem; }
    }
    @media (max-width: 680px){
      .table-container{ display:none; }
      .cards{ display:grid; }
      input[type="search"], select{ min-width:0; flex:1; }
      .mobile-hint{ display:block; }
    }
  </style>
</head>
<body>
  <div class="container" role="application">
    <header>
      <h1 aria-label="í•œêµ­ ì„œí•‘ ìŠ¤íŒŸ ê°€ì´ë“œ">ğŸ„â€â™‚ï¸ í•œêµ­ ì„œí•‘ ìŠ¤íŒŸ ê°€ì´ë“œ</h1>
      <p>êµ­ë‚´ ì£¼ìš” ìŠ¤íŒŸì˜ ë°”ëŒÂ·ë°”ë‹¥Â·ì‹œì¦Œ ì •ë³´ë¥¼ í•œëˆˆì—</p>
    </header>

    <div class="actions" aria-label="í•„í„° ë° ë³´ê¸° ì „í™˜">
      <div class="left-actions">
        <input id="q" type="search" placeholder="ìŠ¤íŒŸ ë˜ëŠ” ì§€ì—­ ê²€ìƒ‰" aria-label="ìŠ¤íŒŸ ê²€ìƒ‰" />
        <select id="regionFilter" aria-label="ì§€ì—­ í•„í„°">
          <option value="">ì „ì²´ ì§€ì—­</option>
        </select>
        <select id="levelFilter" aria-label="ë‚œì´ë„ í•„í„°">
          <option value="">ì „ì²´ ë‚œì´ë„</option>
          <option value="beginner">ì´ˆê¸‰</option>
          <option value="intermediate">ì¤‘ê¸‰</option>
          <option value="advanced">ê³ ê¸‰</option>
        </select>
      </div>
      <button class="toggle" id="sortBtn" aria-pressed="false">ê°€ë‚˜ë‹¤ ìˆœ ì •ë ¬</button>
    </div>

    <!-- ëª¨ë°”ì¼ ìƒ‰ìƒ ì•ˆë‚´ ë°” -->
    <div class="mobile-hint" aria-label="ëª¨ë°”ì¼ ìƒ‰ìƒ ì•ˆë‚´">
      <span class="pill wind">ë°”ëŒ(ì˜¤í”„ì‡¼ì–´)</span>
      <span class="pill swell">íŒŒë„(ë² ìŠ¤íŠ¸)</span>
    </div>

    <div class="table-container" role="region" aria-labelledby="tableCaption">
      <table id="surfTable">
        <caption id="tableCaption">í•œêµ­ ì„œí•‘ ìŠ¤íŒŸ ëª©ë¡</caption>
        <thead>
          <tr>
            <th scope="col">í•´ë³€</th>
            <th scope="col">ì§€ì—­</th>
            <th scope="col" title="ì˜¤í”„ì‡¼ì–´">ë°”ëŒ(ì˜¤í”„ì‡¼ì–´)</th>
            <th scope="col">íŒŒë„(ë² ìŠ¤íŠ¸)</th>
            <th scope="col">ë°”ë‹¥</th>
            <th scope="col">ë² ìŠ¤íŠ¸ ê³„ì ˆ</th>
            <th scope="col">ë² ìŠ¤íŠ¸ ì‹œê°„</th>
            <th scope="col">ë‚œì´ë„</th>
          </tr>
        </thead>
        <tbody id="tbody"></tbody>
      </table>
    </div>

    <section class="cards" id="cards" aria-label="ì¹´ë“œ ë³´ê¸°"></section>

    <section class="legend" aria-label="ë²”ë¡€">
      <h3>ë²”ë¡€</h3>
      <div class="legend-items">
        <div class="legend-item"><div class="wind-arrow" aria-hidden="true">â†“</div><span>ì˜¤í”„ì‡¼ì–´ (ì¢‹ì€ ì¡°ê±´)</span></div>
        <div class="legend-item"><div class="bottom-type sand">ëª¨ë˜</div><span>ë§¨ë°œ OK</span></div>
        <div class="legend-item"><div class="bottom-type reef">ë¦¬í”„</div><span>ë¶€ì¸  ê¶Œì¥</span></div>
        <div class="legend-item"><div class="bottom-type sand">ëª¨ë˜</div><div class="bottom-type reef">ë¦¬í”„</div><span>í˜¼í•© ìŠ¤íŒŸ</span></div>
        <!-- ë°”ëŒ â†’ íŒŒë„ ì˜ˆì‹œ -->
        <div class="legend-item" aria-label="ë°”ëŒì—ì„œ íŒŒë„ ë°©í–¥ ì˜ˆì‹œ">
          <span style="font-weight:700; color:var(--ink)">ì˜ˆì‹œ</span>
          <div class="stack" style="min-width:60px">
            <div class="stack-line"><span class="wind-arrow" title="ì˜¤í”„ì‡¼ì–´ E">â†</span></div>
          </div>
          <span style="opacity:.8">â†’</span>
          <div class="stack-line">
            <span class="swell-arrow" title="ìŠ¤ì›° NE">â†™</span>
            <span class="swell-arrow" title="ìŠ¤ì›° E">â†</span>
            <span class="swell-arrow" title="ìŠ¤ì›° SE">â†–</span>
          </div>
          <span style="opacity:.8">ë°”ëŒ 1ì¤„ â†’ íŒŒë„ 3ë°©í–¥</span>
        </div>
      </div>
    </section>

    <section class="tips" aria-label="ì„œí•‘ íŒ">
      <h3>ğŸ’¡ ì„œí•‘ íŒ</h3>
      <ul>
        <li><strong>ë°”ëŒ ì²´í¬:</strong> ì˜¤í”„ì‡¼ì–´ì¼ìˆ˜ë¡ íŒŒë„ê°€ ì •ëˆë©ë‹ˆë‹¤</li>
        <li><strong>ë°”ëŒ ì„¸ê¸°:</strong> 2â€“6 m/s(ì•½ 4â€“12ë…¸íŠ¸) ì˜¤í”„ì‡¼ì–´ê°€ ë¬´ë‚œ, 7 m/sâ†‘ ì˜¨ì‡¼ì–´Â·ì‚¬ì´ë“œì˜¨ì´ë©´ ë©´ì´ ì‰½ê²Œ ë¬´ë„ˆì§‘ë‹ˆë‹¤</li>
        <li><strong>ìŠ¤ì›° ì£¼ê¸°(Period):</strong> 8â€“12ì´ˆê°€ êµ­ë‚´ ë³´í¸ì  ë² ìŠ¤íŠ¸, 6ì´ˆ ì´í•˜ë©´ ì§§ê³  ííŠ¸ëŸ¬ì§€ê¸° ì‰¬ì›€, 12ì´ˆâ†‘ëŠ” íŒŒì›Œ ì¢‹ì§€ë§Œ ì‚¬ì´ì¦ˆ/ìˆ˜ì‹¬ ì²´í¬</li>
        <li><strong>ì¡°ì„:</strong> ë§Œì¡° ì „í›„ 2ì‹œê°„ì´ ë³´í¸ì ìœ¼ë¡œ ìœ ë¦¬í•©ë‹ˆë‹¤</li>
        <li><strong>ê³„ì ˆ:</strong> 9â€“10ì›”ì´ êµ­ë‚´ ë² ìŠ¤íŠ¸ ì‹œì¦Œ</li>
        <li><strong>ë¦¬í”„:</strong> ë¦¬í”„ ë¶€ì¸  ì°©ìš© ê¶Œì¥</li>
        <li><strong>í™”ì‚´í‘œ:</strong> ë°”ëŒì´ ë¶ˆì–´ê°€ëŠ” ë°©í–¥ í‘œì‹œ</li>
      </ul>
    </section>
  </div>

  <script>
    'use strict';

    const surfSpots = [
      { name:"ì†¡ì • í•´ìˆ˜ìš•ì¥", region:"ë¶€ì‚°", image:"https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=200&h=200&fit=crop", offshore:["NW","N","NE"], onshore:["SE","S","SW"], bottomType:"sand", bestSeason:"ì—°ì¤‘", bestTime:"ë§Œì¡° 2â€“3ì‹œê°„ ì „í›„", difficulty:"beginner" },
      { name:"ì£½ë„ í•´ë³€", region:"ì–‘ì–‘", image:"https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡°ì‹œ", difficulty:"beginner" },
      { name:"ê¸°ì‚¬ë¬¸ í•´ë³€", region:"ì–‘ì–‘", image:"https://images.unsplash.com/photo-1544198365-f5d60b6d8190?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡° 1â€“2ì‹œê°„ ì „", difficulty:"intermediate" },
      { name:"ì„œí”¼ë¹„ì¹˜", region:"ì–‘ì–‘", image:"https://images.unsplash.com/photo-1502680390469-be75c86b636f?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡°ì‹œ", difficulty:"intermediate" },
      { name:"ë§Œë¦¬í¬ í•´ë³€", region:"íƒœì•ˆ", image:"https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=200&h=200&fit=crop", offshore:["E","NE","SE"], onshore:["W","NW","SW"], bottomType:"sand", bestSeason:"ë´„Â·ê°€ì„", bestTime:"ë§Œì¡°ì‹œ", difficulty:"beginner" },
      { name:"ì¤‘ë¬¸ìƒ‰ë‹¬í•´ë³€", region:"ì œì£¼", image:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=200&h=200&fit=crop", offshore:["N","NE","NW"], onshore:["S","SE","SW"], bottomType:"mixed", bestSeason:"9â€“11ì›”Â·3â€“5ì›”", bestTime:"ë§Œì¡° 2ì‹œê°„ ì „í›„", difficulty:"advanced" },
      { name:"ê³ í¥ í•´ìˆ˜ìš•ì¥", region:"ì „ë‚¨ ê³ í¥", image:"https://images.unsplash.com/photo-1544551763-77ef2d0cfc6c?w=200&h=200&fit=crop", offshore:["N","NW","NE"], onshore:["S","SW","SE"], bottomType:"sand", bestSeason:"ì—°ì¤‘", bestTime:"ë§Œì¡°ì‹œ", difficulty:"intermediate" },
      { name:"ì›”í¬í•´ë³€", region:"í¬í•­", image:"https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡° 1â€“2ì‹œê°„ ì „", difficulty:"intermediate" },
      { name:"ëŒ€ì§„í•´ë³€", region:"ë™í•´", image:"https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡° 2ì‹œê°„ ì „í›„", difficulty:"intermediate" },
      { name:"ì •ë™ì§„í•´ë³€", region:"ê°•ë¦‰", image:"https://images.unsplash.com/photo-1544198365-f5d60b6d8190?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡°ì‹œ", difficulty:"beginner" },
      { name:"ì†ì´ˆí•´ë³€", region:"ì†ì´ˆ", image:"https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡° 1â€“2ì‹œê°„ ì „", difficulty:"beginner" },
      { name:"ì‚¼í¬í•´ë³€", region:"ê³ ì„±", image:"https://images.unsplash.com/photo-1502680390469-be75c86b636f?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡°ì‹œ", difficulty:"intermediate" },
      { name:"ê°•ë¬¸í•´ë³€", region:"ê°•ë¦‰", image:"https://images.unsplash.com/photo-1544551763-77ef2d0cfc6c?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡° 2ì‹œê°„ ì „í›„", difficulty:"beginner" },
      { name:"ê²½í¬í•´ë³€", region:"ê°•ë¦‰", image:"https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡°ì‹œ", difficulty:"beginner" }
    ];

    // ì‚¬ìš©ì ì¶”ê°€ ìŠ¤íŒŸ (ì—†ëŠ” ê²ƒë§Œ ë³‘í•©)
    (function addUserSpots(){
      const have = new Set(surfSpots.map(s=>s.name));
      const newSpots = [
        { name:"ì œì£¼ ì´í˜¸í…Œìš°í•´ë³€", region:"ì œì£¼", image:"https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=200&h=200&fit=crop", offshore:["S","SE","SW"], onshore:["N","NE","NW"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡° ì „í›„", difficulty:"beginner" },
        { name:"ì œì£¼ ì›”ì •í•´ë³€", region:"ì œì£¼", image:"https://images.unsplash.com/photo-1544198365-f5d60b6d8190?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡°", difficulty:"beginner" },
        { name:"ì–‘ì–‘ ì¸êµ¬í•´ë³€", region:"ì–‘ì–‘", image:"https://images.unsplash.com/photo-1502680390469-be75c86b636f?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡° ì „í›„", difficulty:"beginner" },
        { name:"ì–‘ì–‘ ê°¯ë§ˆì„í•´ë³€", region:"ì–‘ì–‘", image:"https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡° ì „í›„", difficulty:"intermediate" },
        { name:"ì–‘ì–‘ ë‚¨ì• 3ë¦¬í•´ë³€", region:"ì–‘ì–‘", image:"https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡°", difficulty:"intermediate" },
        { name:"ì–‘ì–‘ ë¬¼ì¹˜í•´ë³€", region:"ì–‘ì–‘", image:"https://images.unsplash.com/photo-1544551763-77ef2d0cfc6c?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡° ì „í›„", difficulty:"beginner" },
        { name:"ì–‘ì–‘ ì„¤ì•…í•´ë³€", region:"ì–‘ì–‘", image:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡°", difficulty:"intermediate" },
        { name:"ì–‘ì–‘ ë™ì‚°í•´ë³€", region:"ì–‘ì–‘", image:"https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡° ì „í›„", difficulty:"beginner" },
        { name:"ì–‘ì–‘ ë‚¨ì• 1ë¦¬ í•´ë³€", region:"ì–‘ì–‘", image:"https://images.unsplash.com/photo-1502680390469-be75c86b636f?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡° ì „í›„", difficulty:"beginner" },
        { name:"ì–‘ì–‘ í•˜ì¡°ëŒ€í•´ë³€", region:"ì–‘ì–‘", image:"https://images.unsplash.com/photo-1544198365-f5d60b6d8190?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡°", difficulty:"beginner" },
        { name:"ì–‘ì–‘ ë™í˜¸í•´ë³€", region:"ì–‘ì–‘", image:"https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡° ì „í›„", difficulty:"intermediate" },
        { name:"ì–‘ì–‘ ë‚™ì‚°í•´ë³€", region:"ì–‘ì–‘", image:"https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡°", difficulty:"beginner" },
        { name:"ì–‘ì–‘ ì •ì•”í•´ë³€", region:"ì–‘ì–‘", image:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡° ì „í›„", difficulty:"intermediate" },
        { name:"ë¶€ì‚° ë‹¤ëŒ€í¬ í•´ë³€", region:"ë¶€ì‚°", image:"https://images.unsplash.com/photo-1544198365-f5d60b6d8190?w=200&h=200&fit=crop", offshore:["N","NE","NW"], onshore:["S","SE","SW"], bottomType:"sand", bestSeason:"ë´„Â·ê°€ì„", bestTime:"ë§Œì¡° ì „í›„", difficulty:"beginner" },
        { name:"ê³ ì„± ì†¡ì§€í˜¸í•´ë³€", region:"ê³ ì„±", image:"https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡°", difficulty:"intermediate" },
        { name:"ê³ ì„± ì²œì§„í•´ë³€", region:"ê³ ì„±", image:"https://images.unsplash.com/photo-1544198365-f5d60b6d8190?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡° ì „í›„", difficulty:"beginner" },
        { name:"ê°•ë¦‰ ê¸ˆì§„í•´ë³€", region:"ê°•ë¦‰", image:"https://images.unsplash.com/photo-1502680390469-be75c86b636f?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡°", difficulty:"beginner" },
        { name:"ì‚¼ì²™ ìš©í™”í•´ë³€", region:"ì‚¼ì²™", image:"https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡° ì „í›„", difficulty:"intermediate" },
        { name:"í¬í•­ ì‹ í•­ë§Œí•´ë³€", region:"í¬í•­", image:"https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=200&h=200&fit=crop", offshore:["W","NW","SW"], onshore:["E","NE","SE"], bottomType:"sand", bestSeason:"9â€“11ì›”", bestTime:"ë§Œì¡°", difficulty:"beginner" },
        { name:"ìš¸ì‚° ì§„í•˜í•´ë³€", region:"ìš¸ì‚°", image:"https://images.unsplash.com/photo-1544198365-f5d60b6d8190?w=200&h=200&fit=crop", offshore:["N","NE","NW"], onshore:["S","SE","SW"], bottomType:"sand", bestSeason:"ë´„Â·ê°€ì„", bestTime:"ë§Œì¡° ì „í›„", difficulty:"beginner" },
        { name:"ê³ í¥ ë‚¨ì—´ í•´ë‹ì´í•´ë³€", region:"ì „ë‚¨ ê³ í¥", image:"https://images.unsplash.com/photo-1544551763-77ef2d0cfc6c?w=200&h=200&fit=crop", offshore:["N","NE","NW"], onshore:["S","SE","SW"], bottomType:"sand", bestSeason:"ë´„Â·ê°€ì„", bestTime:"ë§Œì¡° ì „í›„", difficulty:"intermediate" }
      ];
      newSpots.forEach(s=>{ if(!have.has(s.name)) surfSpots.push(s); });
    })();

    // ì•„ì´ì½˜(ë°”ëŒ/ìŠ¤ì›°)
    const ARROWS = { N:"â†“", NE:"â†™", E:"â†", SE:"â†–", S:"â†‘", SW:"â†—", W:"â†’", NW:"â†˜" };

    const $tbody = document.getElementById('tbody');
    const $cards = document.getElementById('cards');
    const $q = document.getElementById('q');
    const $regionFilter = document.getElementById('regionFilter');
    const $levelFilter = document.getElementById('levelFilter');
    const $sortBtn = document.getElementById('sortBtn');

    let state = { sortAsc: true, query:"", region:"", level:"" };

    const DIRS = ['N','NE','E','SE','S','SW','W','NW'];
    function waveTripletFromOffshore(dir){
      const idx = DIRS.indexOf(dir);
      const opp = (idx + 4) % 8; // ë°˜ëŒ€ ë°©í–¥(ìŠ¤ì›° ì¤‘ì‹¬)
      const left = (opp + 7) % 8; // -45Â°
      const right = (opp + 1) % 8; // +45Â°
      return [DIRS[left], DIRS[opp], DIRS[right]];
    }

    function windColumn(offshoreList){
      const lines = offshoreList.map(d=>`<div class='stack-line'><span class='wind-arrow' title='ì˜¤í”„ì‡¼ì–´ ${d}'>${ARROWS[d]}</span></div>`).join('');
      return `<div class='stack' aria-label='ì˜¤í”„ì‡¼ì–´ 3ì¤„'>${lines}</div>`;
    }
    function waveColumn(offshoreList){
      const groups = offshoreList.map(d=>{
        const tri = waveTripletFromOffshore(d);
        const arrows = tri.map(t=>`<span class='swell-arrow' title='ìŠ¤ì›° ${t}'>${ARROWS[t]}</span>`).join('');
        return `<div class='stack-line'>${arrows}</div>`;
      }).join('');
      return `<div class='stack' aria-label='ë² ìŠ¤íŠ¸ ìŠ¤ì›° 3ì¤„'>${groups}</div>`;
    }

    function bottomBadge(type){
      if(type === 'mixed'){
        // í˜¼í•© ìŠ¤íŒŸì€ ëª¨ë˜+ë¦¬í”„ ë°°ì§€ë¥¼ í•¨ê»˜ í‘œê¸°
        return `<span class="bottom-type sand">ëª¨ë˜</span> <span class="bottom-type reef">ë¦¬í”„</span>`;
      }
      const map={ sand:{t:'ëª¨ë˜',c:'sand'}, reef:{t:'ë¦¬í”„',c:'reef'} };
      const i=map[type]||{t:type,c:'sand'};
      return `<span class="bottom-type ${i.c}">${i.t}</span>`;
    }
    function levelBadge(l){
      const map={ beginner:{t:'ì´ˆê¸‰',c:'beginner'}, intermediate:{t:'ì¤‘ê¸‰',c:'intermediate'}, advanced:{t:'ê³ ê¸‰',c:'advanced'} };
      const i=map[l]||{t:l,c:'beginner'};
      return `<span class="difficulty ${i.c}">${i.t}</span>`;
    }

    // region options
    [...new Set(surfSpots.map(s=>s.region))].sort().forEach(r=>{
      const opt=document.createElement('option'); opt.value=r; opt.textContent=r; $regionFilter.appendChild(opt);
    });

    function applyFilters(){
      const q = state.query.toLowerCase();
      return surfSpots.filter(s=>
        (!state.region || s.region===state.region) &&
        (!state.level || s.difficulty===state.level) &&
        (s.name.toLowerCase().includes(q) || s.region.toLowerCase().includes(q))
      );
    }

    function rowTemplate(s){
      return `<tr tabindex="0">
        <td><div class="beach-info"><img loading="lazy" src="${s.image}" alt="${s.name} ì‚¬ì§„" class="beach-image" width="44" height="44" /><div><div class="beach-name">${s.name}</div></div></div></td>
        <td class="region">${s.region}</td>
        <td>${windColumn(s.offshore)}</td>
        <td>${waveColumn(s.offshore)}</td>
        <td>${bottomBadge(s.bottomType)}</td>
        <td class="season">${s.bestSeason}</td>
        <td class="time">${s.bestTime}</td>
        <td>${levelBadge(s.difficulty)}</td>
      </tr>`;
    }

    function cardTemplate(s){
      return `<article class="card" tabindex="0" aria-label="${s.name}">
        <header><img loading="lazy" class="beach-image" alt="${s.name} ì‚¬ì§„" src="${s.image}" width="44" height="44" /><strong>${s.name}</strong><span class="region">Â· ${s.region}</span></header>
        <div class="meta">${bottomBadge(s.bottomType)} ${levelBadge(s.difficulty)}</div>
        <div class="meta meta-grid">
          <div>
            <div class="subhead wind">ë°”ëŒ(ì˜¤í”„ì‡¼ì–´)</div>
            ${windColumn(s.offshore)}
          </div>
          <div>
            <div class="subhead swell">íŒŒë„(ë² ìŠ¤íŠ¸)</div>
            ${waveColumn(s.offshore)}
          </div>
        </div>
        <div class="meta"><span>ì‹œì¦Œ: ${s.bestSeason}</span><span>ë² ìŠ¤íŠ¸: ${s.bestTime}</span></div>
      </article>`;
    }

    function render(){
      let data = applyFilters();
      data = data.sort((a,b)=> state.sortAsc ? a.name.localeCompare(b.name) : b.name.localeCompare(a.name));
      document.getElementById('tbody').innerHTML = data.map(rowTemplate).join('');
      document.getElementById('cards').innerHTML = data.map(cardTemplate).join('');
      [...document.querySelectorAll('#tbody tr'), ...document.querySelectorAll('#cards .card')].forEach(el=>{
        el.addEventListener('click', ()=> tip(el.querySelector('.beach-name')?.textContent || el.getAttribute('aria-label')));
        el.addEventListener('keyup', (e)=>{ if(e.key==='Enter' || e.key===' ') { e.preventDefault(); el.click(); } });
      });
    }

    function tip(name){
      const msg = `${name}\n\nğŸ’¡ íŒ: ì˜¤í”„ì‡¼ì–´ì¼ ë•Œ ì»¨ë””ì…˜ì´ ì •ëˆë¼ìš”!\nğŸŒŠ ë§Œì¡° ì „í›„ 2ì‹œê°„ í™•ì¸í•˜ê¸°`;
      toast(msg);
    }

    function toast(text){
      const t = document.createElement('div');
      t.textContent = text; t.setAttribute('role','status');
      Object.assign(t.style,{
        position:'fixed', left:'50%', bottom:'24px', transform:'translateX(-50%)',
        background:'rgba(0,0,0,.75)', color:'white', padding:'12px 14px', borderRadius:'12px',
        maxWidth:'min(90vw, 520px)', zIndex:9999, whiteSpace:'pre-wrap', textAlign:'left', boxShadow:'0 6px 18px rgba(0,0,0,.3)'
      });
      document.body.appendChild(t);
      setTimeout(()=> t.remove(), 2600);
    }

    // wiring
    document.getElementById('q').addEventListener('input', (e)=>{ state.query = e.target.value; render(); });
    document.getElementById('regionFilter').addEventListener('change', (e)=>{ state.region = e.target.value; render(); });
    document.getElementById('levelFilter').addEventListener('change', (e)=>{ state.level = e.target.value; render(); });
    document.getElementById('sortBtn').addEventListener('click', ()=>{
      state.sortAsc = !state.sortAsc;
      const btn = document.getElementById('sortBtn');
      btn.ariaPressed = String(!JSON.parse(btn.ariaPressed||'false'));
      btn.textContent = state.sortAsc ? 'ê°€ë‚˜ë‹¤ ìˆœ ì •ë ¬' : 'ê°€ë‚˜ë‹¤ ì—­ìˆœ ì •ë ¬';
      render();
    });

    // ì´ˆê¸° ë Œë”
    render();

    // --- ê°„ë‹¨ í…ŒìŠ¤íŠ¸(ì½˜ì†”) ---
    (function tests(){
      try {
        console.assert(JSON.stringify(waveTripletFromOffshore('W')) === JSON.stringify(['NE','E','SE']), 'Test W failed');
        console.assert(JSON.stringify(waveTripletFromOffshore('NW')) === JSON.stringify(['E','SE','S']), 'Test NW failed');
        console.assert(JSON.stringify(waveTripletFromOffshore('SW')) === JSON.stringify(['N','NE','E']), 'Test SW failed');
        const windHTML = windColumn(['W','NW','SW']);
        const windCount = (windHTML.match(/class='wind-arrow'/g)||[]).length;
        console.assert(windCount === 3, 'WindColumn should render 3 arrows, got ' + windCount);
        const waveHTML = waveColumn(['W','NW','SW']);
        const waveCount = (waveHTML.match(/class='swell-arrow'/g)||[]).length;
        console.assert(waveCount === 9, 'WaveColumn should render 9 arrows, got ' + waveCount);
      } catch (e) {
        console.warn('Runtime tests raised', e);
      }
    })();
  </script>
</body>
</html>
